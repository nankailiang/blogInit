---
title: hash模式和history模式
date: 2022-12-13
sidebar: auto
tags: 
 - JS
 - Vue
categories:
 - JS
---

## Vue Router的路由模式：Hash vs. History

在Vue.js中，Vue Router提供了两种主要的路由模式：**hash**模式和**history**模式。这两种模式在URL的呈现和浏览器历史记录的处理上有所不同，但它们的目的都是为了使单页面应用（SPA）能够拥有良好的用户体验和SEO优化。

### Hash模式

**Hash模式**使用URL的hash部分（即`#`后面的部分）来存储路由信息。在hash模式下，URL看起来像这样：`http://example.com/#/user/john`。由于hash的变化不会触发浏览器的刷新，因此可以实现页面的无缝切换。

- **优点**:
  - **兼容性好**，几乎所有浏览器都支持。
  - **不需要服务器端做额外的配置**。

- **缺点**:
  - URL中的`#`可能在某些场景下不够美观。
  - **SEO可能受到影响**，尽管搜索引擎现在逐渐开始抓取和索引hash链接，但在某些情况下可能不如**history**模式友好。

### History模式

**History模式**使用HTML5的`pushState`和`replaceState`方法来改变浏览器的历史记录栈，从而达到类似多页面应用的效果。在history模式下，URL看起来像这样：`http://example.com/user/john`，更加自然和美观。

- **优点**:
  - **没有`#`**，URL更美观，更接近传统的多页面应用。
  - **对于SEO更加友好**，搜索引擎更容易抓取页面。

- **缺点**:
  - **需要服务器端的配合**，当用户直接访问一个深层级的URL时，服务器需要能够返回SPA的入口文件（通常是`index.html`），否则用户会看到404错误。
  - **兼容性略差**，虽然现代浏览器广泛支持，但一些老旧的浏览器可能不支持。

### 相同点

- **两者都能实现SPA的路由跳转**，用户在导航时不会看到页面的重载。
- **两者都支持嵌套路由和动态路由参数**，可以构建复杂的应用架构。

### 如何选择

选择哪种模式主要取决于项目的具体需求和环境：
- 如果项目不需要SEO优化，且希望快速部署和最小的服务器配置，**hash**模式是一个很好的选择。
- 如果项目注重用户体验和SEO，且可以对服务器进行适当的配置，**history**模式将提供更佳的用户体验。

在实际开发中，可以根据项目的发展阶段和目标灵活选择。在开发初期，使用**hash**模式可以避免服务器配置问题，提高开发效率；在项目成熟后，如果需要更好的用户体验和SEO，再迁移到**history**模式也不迟。